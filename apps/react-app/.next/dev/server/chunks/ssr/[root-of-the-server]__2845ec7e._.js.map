{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/valentin/Documents/stuffs/master-ase/Dezvoltarea%20aplicat%CC%A7iilor%20distribuite%20s%CC%A6i%20Cloud/proiect/apps/react-app/src/containers/uploadForm/index.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport ReactCrop, { Crop } from \"react-image-crop\";\nimport \"react-image-crop/dist/ReactCrop.css\";\nimport axios from \"axios\";\n\nconst UploadForm = () => {\n  const [src, setSrc] = useState<string | null>(null);\n  const [originalFile, setOriginalFile] = useState<File | null>(null);\n  const [crop, setCrop] = useState<Crop | null>(null);\n\n  const handleCropChange = (newCrop: Crop) => {\n    setCrop(newCrop);\n  };\n\n  const handleSelectFile = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files && event.target.files.length > 0) {\n      const file = event.target.files[0];\n      setOriginalFile(file);\n      const reader = new FileReader();\n      reader.addEventListener(\"load\", () => setSrc(reader.result as string));\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = () => {\n    if (!crop || !originalFile) return;\n\n    // create form data to send to backend\n    const form = new FormData();\n    form.append(\"file\", originalFile);\n    form.append(\"x\", String(Math.round(crop.x)));\n    form.append(\"y\", String(Math.round(crop.y)));\n    form.append(\"width\", String(Math.round(crop.width)));\n    form.append(\"height\", String(Math.round(crop.height)));\n\n    const path = process.env.BASE_PATH_URL_JAVALIN || \"http://localhost:8081\";\n\n    const uploadImageAndProcessIt = axios.create({\n      baseURL: path,\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    });\n\n    uploadImageAndProcessIt\n      .post(\"/upload-and-process\", form)\n      .then((response) => {\n        window.location.href = \"/upload/result?message=\" + response.data;\n      })\n      .catch((error) => {\n        alert(\"Error sending the image. Check the console for details.\");\n        console.error(\"Error sending the image:\", error);\n      });\n  };\n\n  return (\n    <div className=\"container-fluid d-flex justify-content-center align-items-center min-vh-100\">\n      <div\n        className=\"card shadow-lg\"\n        style={{ maxWidth: \"600px\", width: \"100%\" }}\n      >\n        <div className=\"card-header text-center bg-primary text-white\">\n          <h2 className=\"mb-0\">Upload Image to be Processed</h2>\n        </div>\n        <div className=\"card-body p-4\">\n          <div className=\"mb-3\">\n            <label htmlFor=\"fileInput\" className=\"form-label fw-bold\">\n              Select Image:\n            </label>\n            <input\n              id=\"fileInput\"\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleSelectFile}\n              className=\"form-control\"\n            />\n          </div>\n\n          {src && (\n            <div className=\"text-center\">\n              <div className=\"alert alert-info mb-3\" role=\"alert\">\n                <i className=\"bi bi-info-circle me-2\"></i>\n                <strong>Instructions:</strong> Select the area of the image you\n                want to process by dragging a rectangle with the mouse, then\n                press the &quot;Submit&quot; button.\n              </div>\n              <div className=\"mb-3\">\n                <ReactCrop crop={crop!} onChange={handleCropChange}>\n                  {/* eslint-disable-next-line @next/next/no-img-element */}\n                  <img\n                    src={src}\n                    alt=\"Imagine pentru crop\"\n                    style={{ maxWidth: \"100%\" }}\n                  />\n                </ReactCrop>\n              </div>\n              {crop && (\n                <div className=\"alert alert-secondary mb-3\">\n                  <h6 className=\"mb-2\">\n                    <i className=\"bi bi-crop me-2\"></i>\n                    Coords selected:\n                  </h6>\n                  <div className=\"row text-start\">\n                    <div className=\"col-6\">\n                      <small>\n                        <strong>X:</strong> {Math.round(crop.x)}px\n                        <br />\n                        <strong>Y:</strong> {Math.round(crop.y)}px\n                      </small>\n                    </div>\n                    <div className=\"col-6\">\n                      <small>\n                        <strong>Width:</strong> {Math.round(crop.width)}px\n                        <br />\n                        <strong>Height:</strong> {Math.round(crop.height)}px\n                      </small>\n                    </div>\n                  </div>\n                </div>\n              )}\n              <button\n                onClick={handleSubmit}\n                className=\"btn btn-success btn-lg\"\n                disabled={crop?.height === 0 || crop?.width === 0}\n              >\n                <i className=\"bi bi-send me-2\"></i>\n                Submit\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UploadForm;\n"],"names":[],"mappings":"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"}}]
}